<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Serving & Optimization - LLMOps Academy</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Module-specific styles */
        .module-header {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .module-title {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 800;
        }
        
        .module-meta {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }
        
        .module-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .module-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 3rem;
            margin-bottom: 3rem;
        }
        
        .learning-objectives {
            background: #faf5ff;
            border-left: 4px solid #8b5cf6;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .objective-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .objective-item {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .objective-item h4 {
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }
        
        .interactive-demo {
            background: #1a202c;
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            border: 1px solid #4a5568;
        }
        
        .demo-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .demo-btn {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }
        
        .demo-btn:hover {
            background: #7c3aed;
        }
        
        .serving-architecture {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .architecture-component {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .architecture-component:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .component-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #8b5cf6;
        }
        
        .component-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #1e293b;
        }
        
        .component-description {
            color: #64748b;
            line-height: 1.6;
        }
        
        .performance-metrics {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8b5cf6;
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .optimization-strategies {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .strategy-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            transition: transform 0.3s ease;
        }
        
        .strategy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .strategy-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .strategy-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        .strategy-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1e293b;
        }
        
        .code-example {
            background: #1a202c;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        .quiz-section {
            background: white;
            border: 2px solid #8b5cf6;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .quiz-question {
            margin-bottom: 1.5rem;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .quiz-option {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quiz-option:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }
        
        .quiz-option.selected {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }
        
        .progress-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 2rem 0;
            padding: 2rem;
            background: #faf5ff;
            border-radius: 12px;
        }
        
        .progress-bar-container {
            flex-grow: 1;
            margin: 0 2rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .module-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        }
        
        .nav-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn.prev {
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }
        
        .nav-btn.prev:hover {
            background: #edf2f7;
        }
        
        .nav-btn.next {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }
        
        .nav-btn.next:hover {
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .module-title {
                font-size: 2rem;
            }
            
            .module-content {
                padding: 2rem 1rem;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .serving-architecture {
                grid-template-columns: 1fr;
            }
            
            .metric-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Module Header -->
    <header class="module-header">
        <div class="module-container">
            <h1 class="module-title">Model Serving & Optimization</h1>
            <div class="module-meta">
                <i class="fas fa-clock"></i> 5 hours â€¢ <i class="fas fa-level-up-alt"></i> Advanced Level
            </div>
            <div class="module-tools">
                <span class="tool-tag">Ray Serve</span>
                <span class="tool-tag">vLLM</span>
                <span class="tool-tag">Triton Inference Server</span>
                <span class="tool-tag">TensorRT</span>
            </div>
        </div>
    </header>

    <!-- Module Content -->
    <div class="module-container">
        <div class="module-content">
            <!-- Learning Objectives -->
            <div class="learning-objectives">
                <h3><i class="fas fa-graduation-cap"></i> Learning Objectives</h3>
                <div class="objective-list">
                    <div class="objective-item">
                        <h4>Master High-Performance Serving</h4>
                        <p>Learn to deploy LLMs with optimal performance using Ray Serve, vLLM, and Triton Inference Server.</p>
                    </div>
                    <div class="objective-item">
                        <h4>Optimize Batch Inference</h4>
                        <p>Discover techniques for batch processing to maximize throughput and reduce latency.</p>
                    </div>
                    <div class="objective-item">
                        <h4>Implement Memory Management</h4>
                        <p>Master memory optimization strategies for handling large models efficiently.</p>
                    </div>
                    <div class="objective-item">
                        <h4>Optimize GPU Utilization</h4>
                        <p>Learn to maximize GPU efficiency and reduce inference costs through proper resource allocation.</p>
                    </div>
                </div>
            </div>

            <!-- Introduction -->
            <section>
                <h2><i class="fas fa-rocket"></i> High-Performance Model Serving</h2>
                <p>Model serving is the process of deploying trained machine learning models to production environments where they can handle real-time inference requests. For LLMs, this requires specialized serving infrastructure to handle the computational demands and ensure low latency responses.</p>
                
                <div class="serving-architecture">
                    <div class="architecture-component">
                        <div class="component-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="component-title">Ray Serve</div>
                        <div class="component-description">
                            Scalable model serving framework built on Ray, designed for high-performance ML serving with automatic scaling and load balancing.
                        </div>
                    </div>
                    
                    <div class="architecture-component">
                        <div class="component-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="component-title">vLLM</div>
                        <div class="component-description">
                            High-throughput and memory-efficient inference engine for LLMs, optimized for GPU utilization and batch processing.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Metrics -->
            <section>
                <h2><i class="fas fa-chart-line"></i> Performance Metrics & Monitoring</h2>
                <p>Understanding and monitoring key performance metrics is crucial for optimizing model serving infrastructure. These metrics help identify bottlenecks and guide optimization efforts.</p>

                <div class="performance-metrics">
                    <h4>Key Performance Indicators</h4>
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="latencyMetric">45ms</div>
                            <div class="metric-label">Average Latency</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="throughputMetric">1000 req/s</div>
                            <div class="metric-label">Throughput</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="gpuUtilMetric">85%</div>
                            <div class="metric-label">GPU Utilization</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="memoryUtilMetric">72%</div>
                            <div class="metric-label">Memory Usage</div>
                        </div>
                    </div>
                </div>

                <div class="interactive-demo">
                    <h4><i class="fas fa-tachometer-alt"></i> Performance Monitoring Simulation</h4>
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="simulateHighLoad()">High Load</button>
                        <button class="demo-btn" onclick="simulateOptimized()">Optimized</button>
                        <button class="demo-btn" onclick="simulateBaseline()">Baseline</button>
                    </div>
                    <div class="visualization-area" id="performanceSimulation">
                        <div style="text-align: center;">
                            <i class="fas fa-chart-line" style="font-size: 3rem; color: #8b5cf6;"></i>
                            <p style="margin-top: 1rem;">Click buttons above to simulate different performance scenarios</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Batch Inference Optimization -->
            <section>
                <h2><i class="fas fa-layer-group"></i> Batch Inference Optimization</h2>
                <p>Batch inference processes multiple requests simultaneously, significantly improving throughput and GPU utilization. However, it requires careful tuning to balance latency and efficiency.</p>

                <div class="optimization-strategies">
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="strategy-title">Dynamic Batching</div>
                        </div>
                        <p>Automatically groups incoming requests into batches based on timing and content similarity, optimizing throughput without significantly increasing latency.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="strategy-title">Latency-Aware Scheduling</div>
                        </div>
                        <p>Intelligently schedules batches to minimize overall latency while maximizing resource utilization, considering request arrival patterns and processing times.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-memory"></i>
                            </div>
                            <div class="strategy-title">Memory Pooling</div>
                        </div>
                        <p>Pre-allocates and manages memory pools to reduce allocation overhead and improve batch processing efficiency.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <div class="strategy-title">Adaptive Batch Sizes</div>
                        </div>
                        <p>Adjusts batch sizes dynamically based on current load, available resources, and latency requirements to maintain optimal performance.</p>
                    </div>
                </div>

                <div class="code-example">
                    <h4>Batch Inference with vLLM:</h4>
                    <pre><code>import torch
from vllm import LLMEngine, SamplingParams

# Initialize the engine
engine = LLMEngine(
    model="meta-llama/Llama-2-7b-chat-hf",
    tokenizer_mode="auto",
    max_model_len=4096,
    tensor_parallel_size=2,
    dtype="auto"
)

# Define sampling parameters
sampling_params = SamplingParams(
    temperature=0.7,
    top_p=0.95,
    max_tokens=512
)

# Process batch of requests
def process_batch(requests):
    # Add requests to engine
    for i, prompt in enumerate(requests):
        engine.add_request(
            request_id=str(i),
            prompt=prompt,
            sampling_params=sampling_params
        )
    
    # Generate outputs
    outputs = []
    while engine.has_pending_requests():
        step_outputs = engine.step()
        for output in step_outputs:
            if output.finished:
                outputs.append(output.outputs[0].text)
    
    return outputs

# Example usage
requests = [
    "Explain quantum computing in simple terms",
    "Write a poem about artificial intelligence",
    "Summarize the key points of machine learning"
]

results = process_batch(requests)</code></pre>
                </div>

                <div class="interactive-demo">
                    <h4><i class="fas fa-batch"></i> Batch Processing Simulation</h4>
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="simulateSingleRequest()">Single Request</button>
                        <button class="demo-btn" onclick="simulateBatchProcessing()">Batch Processing</button>
                        <button class="demo-btn" onclick="simulateAdaptiveBatching()">Adaptive Batching</button>
                    </div>
                    <div class="visualization-area" id="batchSimulation">
                        <div style="text-align: center;">
                            <i class="fas fa-layer-group" style="font-size: 3rem; color: #8b5cf6;"></i>
                            <p style="margin-top: 1rem;">Click buttons above to simulate different batching strategies</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Memory Management -->
            <section>
                <h2><i class="fas fa-memory"></i> Memory Management Strategies</h2>
                <p>Efficient memory management is critical for serving large language models. Proper memory allocation and optimization techniques can significantly reduce costs and improve performance.</p>

                <div class="optimization-strategies">
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-compress"></i>
                            </div>
                            <div class="strategy-title">Model Quantization</div>
                        </div>
                        <p>Reduces model precision (e.g., from FP32 to INT8) to decrease memory usage and improve inference speed with minimal accuracy loss.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-parking"></i>
                            </div>
                            <div class="strategy-title">KV Cache Optimization</div>
                        </div>
                        <p>Optimizes key-value cache memory usage during inference, crucial for autoregressive generation in transformer models.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-recycle"></i>
                            </div>
                            <div class="strategy-title">Memory Reuse</div>
                        </div>
                        <p>Implements sophisticated memory reuse strategies to minimize allocation overhead and reduce memory fragmentation.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-piggy-bank"></i>
                            </div>
                            <div class="strategy-title">Offloading Strategies</div>
                        </div>
                        <p>Intelligently moves model components between GPU and CPU memory based on usage patterns to optimize memory utilization.</p>
                    </div>
                </div>

                <div class="code-example">
                    <h4>Memory Optimization with Quantization:</h4>
                    <pre><code>import torch
import torch.nn as nn
from transformers import AutoModelForCausalLM, AutoTokenizer

# Load model in quantized format
model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-2-7b-chat-hf",
    torch_dtype=torch.float16,
    device_map="auto",
    load_in_8bit=True,  # 8-bit quantization
    # load_in_4bit=True,  # 4-bit quantization (even more memory efficient)
)

tokenizer = AutoTokenizer.from_pretrained("meta-llama/Llama-2-7b-chat-hf")

# Memory-efficient inference
def memory_efficient_inference(prompt, max_length=512):
    inputs = tokenizer(prompt, return_tensors="pt").to("cuda")
    
    with torch.no_grad():
        outputs = model.generate(
            **inputs,
            max_length=max_length,
            do_sample=True,
            temperature=0.7,
            pad_token_id=tokenizer.eos_token_id
        )
    
    return tokenizer.decode(outputs[0], skip_special_tokens=True)

# Example usage
prompt = "Explain the concept of attention in transformers"
response = memory_efficient_inference(prompt)
print(response)</code></pre>
                </div>

                <div class="interactive-demo">
                    <h4><i class="fas fa-memory"></i> Memory Usage Simulation</h4>
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="simulateMemoryOptimization()">Optimize Memory</button>
                        <button class="demo-btn" onclick="simulateMemoryMonitoring()">Monitor Usage</button>
                        <button class="demo-btn" onclick="simulateMemoryPressure()">Memory Pressure</button>
                    </div>
                    <div class="visualization-area" id="memorySimulation">
                        <div style="text-align: center;">
                            <i class="fas fa-memory" style="font-size: 3rem; color: #8b5cf6;"></i>
                            <p style="margin-top: 1rem;">Click buttons above to simulate memory management scenarios</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GPU Optimization -->
            <section>
                <h2><i class="fas fa-microchip"></i> GPU Optimization Techniques</h2>
                <p>Maximizing GPU utilization is essential for cost-effective and high-performance LLM serving. This involves optimizing kernel usage, memory bandwidth, and parallel processing.</p>

                <div class="optimization-strategies">
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="strategy-title">Kernel Fusion</div>
                        </div>
                        <p>Combines multiple operations into single GPU kernels to reduce kernel launch overhead and improve memory bandwidth utilization.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-clone"></i>
                            </div>
                            <div class="strategy-title">Tensor Parallelism</div>
                        </div>
                        <p>Splits large tensors across multiple GPUs to enable serving of models that exceed single GPU memory capacity.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                            <div class="strategy-title">Pipeline Parallelism</div>
                        </div>
                        <p>Partitions model layers across multiple devices to enable efficient training and inference of large models.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="strategy-title">Dynamic Tensor Allocation</div>
                        </div>
                        <p>Optimizes tensor memory allocation patterns to reduce fragmentation and improve GPU memory utilization.</p>
                    </div>
                </div>

                <div class="code-example">
                    <h4>GPU Optimization with TensorRT:</h4>
                    <pre><code>import tensorrt as trt
import pycuda.driver as cuda
import pycuda.autoinit
import numpy as np

class TensorRTModel:
    def __init__(self, engine_path):
        self.engine = self.load_engine(engine_path)
        self.context = self.engine.create_execution_context()
        
        # Allocate buffers
        self.inputs, self.outputs, self.bindings = self.allocate_buffers()
    
    def load_engine(self, engine_path):
        with open(engine_path, "rb") as f, trt.Runtime(trt.Logger()) as runtime:
            return runtime.deserialize_cuda_engine(f.read())
    
    def allocate_buffers(self):
        inputs = []
        outputs = []
        bindings = []
        
        for binding in self.engine:
            size = trt.volume(self.engine.get_binding_shape(binding)) * self.engine.max_batch_size
            dtype = trt.nptype(self.engine.get_binding_dtype(binding))
            
            # Allocate host and device buffers
            host_mem = cuda.pagelocked_empty(size, dtype)
            device_mem = cuda.mem_alloc(host_mem.nbytes)
            
            bindings.append(int(device_mem))
            
            if self.engine.binding_is_input(binding):
                inputs.append({'host': host_mem, 'device': device_mem})
            else:
                outputs.append({'host': host_mem, 'device': device_mem})
        
        return inputs, outputs, bindings
    
    def infer(self, input_data):
        # Transfer input data to device
        np.copyto(self.inputs[0]['host'], input_data.ravel())
        cuda.memcpy_htod_async(self.inputs[0]['device'], self.inputs[0]['host'], stream)
        
        # Execute model
        self.context.execute_async_v2(bindings=self.bindings, stream_handle=stream.handle)
        
        # Transfer predictions back
        cuda.memcpy_dtoh_async(self.outputs[0]['host'], self.outputs[0]['device'], stream)
        stream.synchronize()
        
        return self.outputs[0]['host']

# Usage
model = TensorRTModel("optimized_model.engine")
result = model.infer(input_tensor)</code></pre>
                </div>

                <div class="interactive-demo">
                    <h4><i class="fas fa-microchip"></i> GPU Optimization Simulation</h4>
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="simulateGPUOptimization()">Optimize GPU</button>
                        <button class="demo-btn" onclick="simulateGPUMonitoring()">Monitor GPU</button>
                        <button class="demo-btn" onclick="simulateGPUScaling()">Scale GPU</button>
                    </div>
                    <div class="visualization-area" id="gpuSimulation">
                        <div style="text-align: center;">
                            <i class="fas fa-microchip" style="font-size: 3rem; color: #8b5cf6;"></i>
                            <p style="margin-top: 1rem;">Click buttons above to simulate GPU optimization scenarios</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cost Optimization -->
            <section>
                <h2><i class="fas fa-dollar-sign"></i> Cost Optimization Strategies</h2>
                <p>Optimizing serving costs involves balancing performance requirements with resource utilization. This includes choosing appropriate instance types, implementing auto-scaling, and using spot instances.</p>

                <div class="optimization-strategies">
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="strategy-title">Auto-Scaling</div>
                        </div>
                        <p>Automatically adjusts the number of serving instances based on traffic patterns to maintain performance while minimizing costs.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-cloud"></i>
                            </div>
                            <div class="strategy-title">Spot Instances</div>
                        </div>
                        <p>Uses discounted cloud compute instances for non-critical workloads, with fallback strategies for instance interruptions.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="strategy-title">Predictive Scaling</div>
                        </div>
                        <p>Uses historical traffic patterns and machine learning to predict and prepare for traffic spikes before they occur.</p>
                    </div>
                    
                    <div class="strategy-card">
                        <div class="strategy-header">
                            <div class="strategy-icon">
                                <i class="fas fa-recycle"></i>
                            </div>
                            <div class="strategy-title">Resource Reuse</div>
                        </div>
                        <p>Implements sophisticated resource pooling and reuse strategies to minimize instance startup times and costs.</p>
                    </div>
                </div>

                <div class="code-example">
                    <h4>Cost-Optimized Serving with Ray:</h4>
                    <pre><code>from ray import serve
from ray.serve import BackendConfig
import time

@serve.deployment(
    num_replicas=2,  # Start with 2 replicas
    max_replicas=20,  # Scale up to 20 replicas
    autoscaling_config={
        "min_replicas": 2,
        "max_replicas": 20,
        "target_num_ongoing_requests_per_replica": 10,
        "metrics_interval_s": 10,
        "look_back_period_s": 60,
        "downscale_delay_s": 600,  # 10 minutes
        "upscale_delay_s": 30,    # 30 seconds
    }
)
class CostOptimizedLLM:
    def __init__(self):
        # Initialize model with memory optimization
        self.model = load_optimized_model()
    
    def __call__(self, request):
        # Process request with cost-aware batching
        return self.generate_response(request.json())
    
    def generate_response(self, prompt):
        # Implement cost-optimized inference
        return self.model.generate(prompt)

# Configure deployment
config = BackendConfig(
    max_concurrent_queries=100,
    user_config={
        "batch_size": 32,
        "max_latency_ms": 1000,
        "memory_optimization": True
    }
)

# Deploy
serve.run(CostOptimizedLLM.bind(), backend_config=config)</code></pre>
                </div>

                <div class="interactive-demo">
                    <h4><i class="fas fa-dollar-sign"></i> Cost Optimization Simulation</h4>
                    <div class="demo-controls">
                        <button class="demo-btn" onclick="simulateCostOptimization()">Optimize Costs</button>
                        <button class="demo-btn" onclick="simulateCostMonitoring()">Monitor Costs</button>
                        <button class="demo-btn" onclick="simulateCostScaling()">Scale Costs</button>
                    </div>
                    <div class="visualization-area" id="costSimulation">
                        <div style="text-align: center;">
                            <i class="fas fa-dollar-sign" style="font-size: 3rem; color: #8b5cf6;"></i>
                            <p style="margin-top: 1rem;">Click buttons above to simulate cost optimization scenarios</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quiz Section -->
            <section>
                <div class="quiz-section">
                    <h3><i class="fas fa-question-circle"></i> Knowledge Check</h3>
                    
                    <div class="quiz-question">
                        <h4>1. What is the primary benefit of batch inference?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectOption(this, 1)">Reduced model accuracy</div>
                            <div class="quiz-option" onclick="selectOption(this, 1)">Increased throughput and GPU utilization</div>
                            <div class="quiz-option" onclick="selectOption(this, 1)">Higher latency per request</div>
                            <div class="quiz-option" onclick="selectOption(this, 1)">Simplified model architecture</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>2. What does model quantization primarily achieve?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectOption(this, 2)">Increases model size</div>
                            <div class="quiz-option" onclick="selectOption(this, 2)">Reduces memory usage and improves speed</div>
                            <div class="quiz-option" onclick="selectOption(this, 2)">Improves model accuracy</div>
                            <div class="quiz-option" onclick="selectOption(this, 2)">Eliminates the need for GPUs</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>3. Why is KV cache optimization important for transformers?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectOption(this, 3)">It reduces training time</div>
                            <div class="quiz-option" onclick="selectOption(this, 3)">It optimizes memory usage during autoregressive generation</div>
                            <div class="quiz-option" onclick="selectOption(this, 3)">It improves model accuracy</div>
                            <div class="quiz-option" onclick="selectOption(this, 3)">It eliminates the need for attention mechanisms</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>4. What is the main purpose of auto-scaling in model serving?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectOption(this, 4)">To maintain consistent performance while optimizing costs</div>
                            <div class="quiz-option" onclick="selectOption(this, 4)">To always use maximum resources</div>
                            <div class="quiz-option" onclick="selectOption(this, 4)">To eliminate all latency</div>
                            <div class="quiz-option" onclick="selectOption(this, 4)">To reduce model complexity</div>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="checkAnswers()">Check Answers</button>
                    <div id="quiz-result" style="margin-top: 1rem; font-weight: bold;"></div>
                </div>
            </section>

            <!-- Progress & Next Steps -->
            <div class="progress-section">
                <span><i class="fas fa-chart-line"></i> Module Progress</span>
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="moduleProgress" style="width: 100%"></div>
                    </div>
                </div>
                <span id="progressText">100% Complete</span>
            </div>

            <!-- Module Navigation -->
            <div class="module-navigation">
                <a href="containerization-orchestration.html" class="nav-btn prev">
                    <i class="fas fa-arrow-left"></i> Previous: Containerization & Orchestration
                </a>
                <a href="../index.html" class="nav-btn next">
                    Back to Curriculum <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Module Resources</h3>
                    <ul>
                        <li><a href="https://docs.ray.io/en/latest/serve/index.html" target="_blank">Ray Serve Documentation</a></li>
                        <li><a href="https://docs.vllm.ai/" target="_blank">vLLM Documentation</a></li>
                        <li><a href="https://developer.nvidia.com/nvidia-triton-inference-server" target="_blank">Triton Inference Server</a></li>
                        <li><a href="https://developer.nvidia.com/tensorrt" target="_blank">TensorRT Documentation</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Practice Exercises</h3>
                    <ul>
                        <li><a href="#">Download Exercise Files</a></li>
                        <li><a href="#">Performance Optimization Challenges</a></li>
                        <li><a href="#">Cost Analysis Tools</a></li>
                        <li><a href="#">Discussion Forum</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        function simulateHighLoad() {
            const area = document.getElementById('performanceSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">High Load Scenario</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Average Latency</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">200ms</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 80%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Throughput</span>
                                <span style="font-size: 0.9rem; color: #f59e0b;">800 req/s</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #f59e0b; height: 100%; width: 80%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Utilization</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">95%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 95%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            System under high load<br>
                            Performance degradation detected<br>
                            Consider scaling resources
                        </div>
                    </div>
                </div>
            `;
            
            // Update metrics
            document.getElementById('latencyMetric').innerText = '200ms';
            document.getElementById('latencyMetric').style.color = '#ef4444';
            document.getElementById('throughputMetric').innerText = '800 req/s';
            document.getElementById('throughputMetric').style.color = '#f59e0b';
            document.getElementById('gpuUtilMetric').innerText = '95%';
            document.getElementById('gpuUtilMetric').style.color = '#ef4444';
        }

        function simulateOptimized() {
            const area = document.getElementById('performanceSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Optimized Performance</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Average Latency</span>
                                <span style="font-size: 0.9rem; color: #10b981;">25ms</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 25%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Throughput</span>
                                <span style="font-size: 0.9rem; color: #10b981;">2000 req/s</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Utilization</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">75%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 75%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Optimal performance achieved<br>
                            All metrics within target ranges<br>
                            Cost efficiency maximized
                        </div>
                    </div>
                </div>
            `;
            
            // Update metrics
            document.getElementById('latencyMetric').innerText = '25ms';
            document.getElementById('latencyMetric').style.color = '#10b981';
            document.getElementById('throughputMetric').innerText = '2000 req/s';
            document.getElementById('throughputMetric').style.color = '#10b981';
            document.getElementById('gpuUtilMetric').innerText = '75%';
            document.getElementById('gpuUtilMetric').style.color = '#3b82f6';
        }

        function simulateBaseline() {
            const area = document.getElementById('performanceSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Baseline Performance</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Average Latency</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">45ms</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 45%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Throughput</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">1000 req/s</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Utilization</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">85%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 85%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Standard performance baseline<br>
                            Room for optimization<br>
                            Monitoring active
                        </div>
                    </div>
                </div>
            `;
            
            // Update metrics
            document.getElementById('latencyMetric').innerText = '45ms';
            document.getElementById('latencyMetric').style.color = '#8b5cf6';
            document.getElementById('throughputMetric').innerText = '1000 req/s';
            document.getElementById('throughputMetric').style.color = '#8b5cf6';
            document.getElementById('gpuUtilMetric').innerText = '85%';
            document.getElementById('gpuUtilMetric').style.color = '#8b5cf6';
        }

        function simulateSingleRequest() {
            const area = document.getElementById('batchSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Single Request Processing</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">1</div>
                                <div style="font-size: 0.8rem;">Request</div>
                                <div style="font-size: 0.7rem; color: #94a3b8;">Processing</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #334155; border-radius: 50%; margin: 0 auto 0.5rem auto;"></div>
                                <div style="font-size: 0.8rem;">GPU</div>
                                <div style="font-size: 0.7rem; color: #94a3b8;">Idle</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #334155; border-radius: 50%; margin: 0 auto 0.5rem auto;"></div>
                                <div style="font-size: 0.8rem;">Memory</div>
                                <div style="font-size: 0.7rem; color: #94a3b8;">Underused</div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Single request processing<br>
                            GPU utilization: 25%<br>
                            Latency: 200ms<br>
                            Throughput: 5 req/s
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateBatchProcessing() {
            const area = document.getElementById('batchSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Batch Processing</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">1</div>
                                <div style="font-size: 0.8rem;">Request</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">2</div>
                                <div style="font-size: 0.8rem;">Request</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">3</div>
                                <div style="font-size: 0.8rem;">Request</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">4</div>
                                <div style="font-size: 0.8rem;">Request</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">5</div>
                                <div style="font-size: 0.8rem;">Request</div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Batch of 5 requests processed together<br>
                            GPU utilization: 85%<br>
                            Latency: 50ms per request<br>
                            Throughput: 100 req/s
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateAdaptiveBatching() {
            const area = document.getElementById('batchSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Adaptive Batching</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">1</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">2</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">3</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">4</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">5</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #3b82f6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">6</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #3b82f6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">7</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 30px; height: 30px; background: #3b82f6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">8</div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Adaptive batch size based on load<br>
                            GPU utilization: 95%<br>
                            Latency: 30ms per request<br>
                            Throughput: 200 req/s
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateMemoryOptimization() {
            const area = document.getElementById('memorySimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Memory Optimization Applied</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Model Memory</span>
                                <span style="font-size: 0.9rem; color: #10b981;">Reduced by 60%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 40%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">KV Cache Memory</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">Optimized by 45%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 55%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Memory Fragmentation</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">Reduced by 80%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 20%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Quantization applied: FP16 â†’ INT8<br>
                            KV cache optimization enabled<br>
                            Memory pooling implemented
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateMemoryMonitoring() {
            const area = document.getElementById('memorySimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Memory Usage Monitoring</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Memory</span>
                                <span style="font-size: 0.9rem; color: #f59e0b;">72% (14.4GB / 20GB)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #f59e0b; height: 100%; width: 72%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">CPU Memory</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">45% (18GB / 40GB)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 45%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Memory Pressure</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">High</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 85%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Memory usage approaching limits<br>
                            Consider optimization strategies<br>
                            Monitor for potential OOM errors
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateMemoryPressure() {
            const area = document.getElementById('memorySimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Memory Pressure Detected</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Memory</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">95% (19GB / 20GB)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 95%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">CPU Memory</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">88% (35.2GB / 40GB)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 88%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Swap Usage</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">High</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 90%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Critical memory pressure detected<br>
                            Performance degradation likely<br>
                            Immediate optimization required
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateGPUOptimization() {
            const area = document.getElementById('gpuSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">GPU Optimization Applied</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Utilization</span>
                                <span style="font-size: 0.9rem; color: #10b981;">95%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 95%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Memory Bandwidth</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">Optimized</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Kernel Efficiency</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">Improved by 40%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Tensor parallelism enabled<br>
                            Kernel fusion applied<br>
                            Memory allocation optimized
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateGPUMonitoring() {
            const area = document.getElementById('gpuSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">GPU Performance Monitoring</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Utilization</span>
                                <span style="font-size: 0.9rem; color: #f59e0b;">75%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #f59e0b; height: 100%; width: 75%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">GPU Memory</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">68% (13.6GB / 20GB)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 68%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Temperature</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">65Â°C</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 65%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            GPU performance within normal range<br>
                            No thermal throttling detected<br>
                            Memory usage acceptable
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateGPUScaling() {
            const area = document.getElementById('gpuSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">GPU Scaling Applied</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">GPU 1</div>
                                <div style="font-size: 0.8rem;">95%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">GPU 2</div>
                                <div style="font-size: 0.8rem;">92%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">GPU 3</div>
                                <div style="font-size: 0.8rem;">88%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; margin: 0 auto 0.5rem auto; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">GPU 4</div>
                                <div style="font-size: 0.8rem;">90%</div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Multi-GPU scaling enabled<br>
                            Load balanced across 4 GPUs<br>
                            Total throughput: 4000 req/s<br>
                            Average latency: 25ms
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateCostOptimization() {
            const area = document.getElementById('costSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Cost Optimization Applied</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Cost Reduction</span>
                                <span style="font-size: 0.9rem; color: #10b981;">45% ($225/day)</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 45%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Resource Efficiency</span>
                                <span style="font-size: 0.9rem; color: #3b82f6;">Improved by 60%</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #3b82f6; height: 100%; width: 60%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Auto-Scaling</span>
                                <span style="font-size: 0.9rem; color: #8b5cf6;">Active</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #8b5cf6; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Spot instances enabled<br>
                            Predictive scaling active<br>
                            Resource pooling implemented
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateCostMonitoring() {
            const area = document.getElementById('costSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Cost Monitoring Active</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Current Daily Cost</span>
                                <span style="font-size: 0.9rem; color: #f59e0b;">$495</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #f59e0b; height: 100%; width: 55%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Monthly Projection</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">$14,850</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 75%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Optimization Potential</span>
                                <span style="font-size: 0.9rem; color: #10b981;">$300/day</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 40%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Cost monitoring active<br>
                            Optimization opportunities identified<br>
                            Consider implementing cost-saving measures
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateCostScaling() {
            const area = document.getElementById('costSimulation');
            area.innerHTML = `
                <div style="text-align: center;">
                    <h4 style="margin-bottom: 1rem;">Cost Scaling Simulation</h4>
                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem;">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Low Traffic (Night)</span>
                                <span style="font-size: 0.9rem; color: #10b981;">$50/day</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #10b981; height: 100%; width: 10%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Normal Traffic (Day)</span>
                                <span style="font-size: 0.9rem; color: #f59e0b;">$400/day</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #f59e0b; height: 100%; width: 45%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem;">Peak Traffic (Events)</span>
                                <span style="font-size: 0.9rem; color: #ef4444;">$1200/day</span>
                            </div>
                            <div style="background: #334155; height: 20px; border-radius: 10px; overflow: hidden;">
                                <div style="background: #ef4444; height: 100%; width: 100%;"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #94a3b8;">
                            Auto-scaling maintains cost efficiency<br>
                            Predictive scaling reduces startup costs<br>
                            Spot instances reduce baseline costs
                        </div>
                    </div>
                </div>
            `;
        }

        function selectOption(element, questionNum) {
            // Remove previous selections for this question
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Add selection to clicked option
            element.classList.add('selected');
        }

        function checkAnswers() {
            const results = [
                { question: 1, correct: 1 }, // Second option is correct (Increased throughput)
                { question: 2, correct: 1 }, // Second option is correct (Reduces memory usage)
                { question: 3, correct: 1 }, // Second option is correct (Optimizes memory usage)
                { question: 4, correct: 0 }  // First option is correct (Maintain performance while optimizing costs)
            ];

            let score = 0;
            results.forEach(result => {
                const options = document.querySelectorAll(`.quiz-question:nth-child(${result.question}) .quiz-option`);
                const selected = Array.from(options).findIndex(opt => opt.classList.contains('selected'));
                if (selected === result.correct) {
                    score++;
                }
            });

            const resultDiv = document.getElementById('quiz-result');
            resultDiv.innerText = `You scored ${score}/${results.length} correct answers!`;
            resultDiv.style.color = score === results.length ? '#8b5cf6' : '#ef4444';
        }

        // Progress tracking
        function updateProgress() {
            const progress = document.getElementById('moduleProgress');
            const text = document.getElementById('progressText');
            let width = parseInt(progress.style.width) || 100;
            
            if (width < 100) {
                width += 25;
                progress.style.width = width + '%';
                text.innerText = width + '% Complete';
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Add click event to progress bar to advance
            document.querySelector('.progress-bar').addEventListener('click', updateProgress);
        });
    </script>
</body>
</html>